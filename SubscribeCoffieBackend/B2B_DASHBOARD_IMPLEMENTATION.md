# B2B Dashboard –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ –∫–∞—Ñ–µ - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

## üìã –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π B2B Dashboard –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ –∫–∞—Ñ–µ, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é —Å–≤–æ–∏–º–∏ –∫–∞—Ñ–µ –∏ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–µ.

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### Backend (Database & RPC)

#### –ú–∏–≥—Ä–∞—Ü–∏—è: `20260221000000_cafe_owner_rls.sql`

**–ù–æ–≤—ã–µ –ø–æ–ª—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `owner_id` –≤ —Ç–∞–±–ª–∏—Ü—É `cafes` –¥–ª—è —Å–≤—è–∑–∏ –∫–∞—Ñ–µ —Å –≤–ª–∞–¥–µ–ª—å—Ü–µ–º
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `stop_reason` –≤ —Ç–∞–±–ª–∏—Ü—É `menu_items` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–æ–ø-–ª–∏—Å—Ç–æ–º

**RLS –ü–æ–ª–∏—Ç–∏–∫–∏:**
–°–æ–∑–¥–∞–Ω—ã Row Level Security –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤ –∫–∞—Ñ–µ:
- –í–ª–∞–¥–µ–ª—å—Ü—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∫–∞—Ñ–µ
- –í–ª–∞–¥–µ–ª—å—Ü—ã —É–ø—Ä–∞–≤–ª—è—é—Ç —Ç–æ–ª—å–∫–æ –º–µ–Ω—é —Å–≤–æ–∏—Ö –∫–∞—Ñ–µ
- –í–ª–∞–¥–µ–ª—å—Ü—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ –∑–∞–∫–∞–∑—ã —Å–≤–æ–∏—Ö –∫–∞—Ñ–µ

**RPC –§—É–Ω–∫—Ü–∏–∏:**

1. **`get_owner_cafes()`**
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–∞—Ñ–µ, –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—â–∏—Ö —Ç–µ–∫—É—â–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

2. **`get_cafe_owner_dashboard_metrics(cafe_id, period)`**
   - –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è dashboard
   - –ü–∞—Ä–∞–º–µ—Ç—Ä period: 'today', 'week', 'month', 'all'
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: orders, revenue, performance

3. **`get_cafe_owner_top_items(cafe_id, limit, days)`**
   - –¢–æ–ø-–ø—Ä–æ–¥–∞–≤–∞–µ–º—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –º–µ–Ω—é
   - –° —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –ø–µ—Ä–∏–æ–¥—É

4. **`get_cafe_owner_hourly_stats(cafe_id, days)`**
   - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –ø–æ —á–∞—Å–∞–º –¥–Ω—è
   - –î–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–∏–∫–æ–≤—ã—Ö —á–∞—Å–æ–≤

5. **`get_cafe_owner_customer_retention(cafe_id, days)`**
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É–¥–µ—Ä–∂–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
   - Retention rate, returning customers

6. **`toggle_menu_item_availability(item_id, is_active)`**
   - –í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –º–µ–Ω—é (—Å—Ç–æ–ø-–ª–∏—Å—Ç)

7. **`update_menu_item_stop_reason(item_id, stop_reason)`**
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏—á–∏–Ω—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ–∑–∏—Ü–∏–∏

**Helper —Ñ—É–Ω–∫—Ü–∏–∏:**
- `is_cafe_owner(cafe_id)` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–Ω–∏—è –∫–∞—Ñ–µ
- `is_owner_role()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ owner

### Frontend (Admin Panel)

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `/cafe-owner/`

```
/cafe-owner/
‚îú‚îÄ‚îÄ layout.tsx                    # Layout –¥–ª—è cafe owner —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
‚îú‚îÄ‚îÄ dashboard/
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx                  # –ì–ª–∞–≤–Ω—ã–π dashboard —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
‚îú‚îÄ‚îÄ orders/
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx                  # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏
‚îú‚îÄ‚îÄ menu/
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx                  # –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ–Ω—é
‚îú‚îÄ‚îÄ stop-list/
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                  # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–æ–ø-–ª–∏—Å—Ç–æ–º
‚îÇ   ‚îî‚îÄ‚îÄ StopListTable.tsx         # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞
‚îú‚îÄ‚îÄ analytics/
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx                  # –ü–æ–¥—Ä–æ–±–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
‚îú‚îÄ‚îÄ customers/
‚îÇ   ‚îî‚îÄ‚îÄ page.tsx                  # –ë–∞–∑–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤
‚îî‚îÄ‚îÄ settings/
    ‚îî‚îÄ‚îÄ page.tsx                  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞—Ñ–µ
```

#### API Routes

```
/api/cafe-owner/
‚îú‚îÄ‚îÄ toggle-item/route.ts          # API –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è –ø–æ–∑–∏—Ü–∏–π
‚îî‚îÄ‚îÄ update-stop-reason/route.ts   # API –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏—á–∏–Ω—ã —Å—Ç–æ–ø-–ª–∏—Å—Ç–∞
```

## üìä –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Dashboard

### 1. –ì–ª–∞–≤–Ω—ã–π Dashboard (`/cafe-owner/dashboard`)

**–ú–µ—Ç—Ä–∏–∫–∏:**
- –ó–∞–∫–∞–∑—ã (–≤—Å–µ–≥–æ, –∑–∞–≤–µ—Ä—à–µ–Ω–æ, –æ—Ç–º–µ–Ω–µ–Ω–æ)
- –í—ã—Ä—É—á–∫–∞ (–æ–±—â–∞—è, —Å—Ä–µ–¥–Ω–∏–π —á–µ–∫)
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (completion rate, –≤—Ä–µ–º—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏)

**–ö–ª–∏–µ–Ω—Ç—ã:**
- –í—Å–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –í–æ–∑–≤—Ä–∞—â–∞—é—â–∏–µ—Å—è –∫–ª–∏–µ–Ω—Ç—ã
- Retention rate
- –ó–∞–∫–∞–∑–æ–≤ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞

**–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏:**
- –ì—Ä–∞—Ñ–∏–∫ –ø–∏–∫–æ–≤—ã—Ö —á–∞—Å–æ–≤ (hourly distribution)
- –¢–æ–ø-5 –ø–æ–∑–∏—Ü–∏–π –º–µ–Ω—é
- Quick actions –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

**–§–∏–ª—å—Ç—Ä—ã:**
- –ü–æ –∫–∞—Ñ–µ (–µ—Å–ª–∏ —É –≤–ª–∞–¥–µ–ª—å—Ü–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ)
- –ü–æ –ø–µ—Ä–∏–æ–¥—É (—Å–µ–≥–æ–¥–Ω—è, –Ω–µ–¥–µ–ª—è, –º–µ—Å—è—Ü, –≤—Å–µ –≤—Ä–µ–º—è)

### 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏ (`/cafe-owner/orders`)

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∑–∞–∫–∞–∑–æ–≤ –∫–∞—Ñ–µ
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É (paid, preparing, ready, picked_up)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–µ
- –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏—è
- QR-–∫–æ–¥ –¥–ª—è –≤—ã–¥–∞—á–∏

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
- Quick filters –¥–ª—è —É–¥–æ–±–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é (`/cafe-owner/menu`)

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –ø–æ–∑–∏—Ü–∏–π –º–µ–Ω—é
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (drinks, food, syrups, merch)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ (–¥–æ—Å—Ç—É–ø–Ω–æ/–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ)
- –¶–µ–Ω–∞ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –í—Å–µ–≥–æ –ø–æ–∑–∏—Ü–∏–π
- –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–∑–∏—Ü–∏–π - —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### 4. –°—Ç–æ–ø-–ª–∏—Å—Ç (`/cafe-owner/stop-list`)

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏—á–∏–Ω—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è: –≤—Å–µ / –¥–æ—Å—Ç—É–ø–Ω–æ / –≤ —Å—Ç–æ–ø-–ª–∏—Å—Ç–µ
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

**–í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è:**
- –ó–µ–ª–µ–Ω—ã–µ badges –¥–ª—è –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–∑–∏—Ü–∏–π
- –ö—Ä–∞—Å–Ω—ã–µ badges –¥–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã—Ö
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–∏—á–∏–Ω—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:**
- –ö–Ω–æ–ø–∫–∏ –≤–∫–ª—é—á–µ–Ω–∏—è/–æ—Ç–∫–ª—é—á–µ–Ω–∏—è
- Inline —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏—á–∏–Ω—ã
- –ë–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### 5. –ü–æ–¥—Ä–æ–±–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (`/cafe-owner/analytics`)

**–ú–µ—Ç—Ä–∏–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤:**
- –í—Å–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–æ–≤, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–µ—Å—è
- Retention rate
- –ó–∞–∫–∞–∑–æ–≤ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–∞

**–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —á–∞—Å–∞–º:**
- –í–∏–∑—É–∞–ª—å–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫ –∑–∞–∫–∞–∑–æ–≤ –ø–æ —á–∞—Å–∞–º
- –ü–∏–∫–æ–≤—ã–µ —á–∞—Å—ã
- –í—ã—Ä—É—á–∫–∞ –ø–æ —á–∞—Å–∞–º
- –°—Ä–µ–¥–Ω–∏–π —á–µ–∫

**–¢–æ–ø –ø–æ–∑–∏—Ü–∏–π –º–µ–Ω—é:**
- –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ (–¥–æ 20 –ø–æ–∑–∏—Ü–∏–π)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥–∞–Ω–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü
- –í—ã—Ä—É—á–∫–∞ –ø–æ –ø–æ–∑–∏—Ü–∏–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤

**–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö:**
- –ö–Ω–æ–ø–∫–∏ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ Excel –∏ PDF (UI –≥–æ—Ç–æ–≤)

**–§–∏–ª—å—Ç—Ä—ã:**
- –ü–æ –ø–µ—Ä–∏–æ–¥—É: 7, 30, 90, 365 –¥–Ω–µ–π

### 6. –ë–∞–∑–∞ –∫–ª–∏–µ–Ω—Ç–æ–≤ (`/cafe-owner/customers`)

**–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª–∏–µ–Ω—Ç–∞—Ö:**
- –ò–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–∫–∞–∑–æ–≤
- –ü–æ—Ç—Ä–∞—á–µ–Ω–æ –≤—Å–µ–≥–æ
- –°—Ä–µ–¥–Ω–∏–π —á–µ–∫
- –î–∞—Ç–∞ –ø–µ—Ä–≤–æ–≥–æ –∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –∑–∞–∫–∞–∑–∞
- VIP badge –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –í—Å–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –í–æ–∑–≤—Ä–∞—â–∞—é—â–∏–µ—Å—è –∫–ª–∏–µ–Ω—Ç—ã
- –°—Ä–µ–¥–Ω–∏–π —á–µ–∫
- –í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤

**–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞:**
- –ü–æ —Å—É–º–º–µ –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

### 7. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (`/cafe-owner/settings`)

**–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**
- –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ñ–µ
- –ê–¥—Ä–µ—Å

**–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
- –°—Ç–∞—Ç—É—Å —Ä–∞–±–æ—Ç—ã (open, busy, paused, closed)
- ETA (–º–∏–Ω—É—Ç—ã)
- –ú–∞–∫—Å–∏–º—É–º –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ CityPass

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ò–∑–º–µ–Ω–µ–Ω–∏—è - —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

**–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:**
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### Row Level Security (RLS)

–í—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∑–∞—â–∏—â–µ–Ω—ã RLS –ø–æ–ª–∏—Ç–∏–∫–∞–º–∏:
- –í–ª–∞–¥–µ–ª—å—Ü—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ —Å–≤–æ–∏—Ö –∫–∞—Ñ–µ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `owner_id = auth.uid()`
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –∏–º–µ—é—Ç –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ `is_admin()`

### RPC Functions Security

–í—Å–µ RPC —Ñ—É–Ω–∫—Ü–∏–∏:
- –ü—Ä–æ–≤–µ—Ä—è—é—Ç –≤–ª–∞–¥–µ–Ω–∏–µ –∫–∞—Ñ–µ –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç `security definer` –¥–ª—è –æ–±—Ö–æ–¥–∞ RLS –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏
- –í—ã–±—Ä–∞—Å—ã–≤–∞—é—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ unauthorized access

### API Routes Security

API routes –∏—Å–ø–æ–ª—å–∑—É—é—Ç:
- Server-side Supabase client —Å auth
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ —á–µ—Ä–µ–∑ RPC —Ñ—É–Ω–∫—Ü–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

## üé® UX/UI Features

### –ù–∞–≤–∏–≥–∞—Ü–∏—è
- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é —Å –∏–∫–æ–Ω–∫–∞–º–∏
- –°–ø–∏—Å–æ–∫ —Å–≤–æ–∏—Ö –∫–∞—Ñ–µ –≤ —Å–∞–π–¥–±–∞—Ä–µ
- Quick links –Ω–∞ –≥–ª–∞–≤–Ω–æ–º dashboard
- Breadcrumbs —á–µ—Ä–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü

### –í—ã–±–æ—Ä –∫–∞—Ñ–µ
- Dropdown selector –Ω–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ —á–µ—Ä–µ–∑ URL params
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∫–∞—Ñ–µ

### –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è
- Color-coded metrics (blue, green, purple)
- Badges –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤
- Gradient charts –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
- Empty states –¥–ª—è –ø—É—Å—Ç—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### Responsive Design
- Grid layouts —Å –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å—é
- Mobile-friendly tables
- Overflow handling –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤

## üöÄ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π

### Admin Panel
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ Cafe Owner Panel –≤ admin layout
- Owners –≤–∏–¥—è—Ç —Å—Å—ã–ª–∫—É –≤ header
- Admins –º–æ–≥—É—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –ø–∞–Ω–µ–ª—è–º–∏

### –†–æ–ª–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–∏—Å—Ç–µ–º—É —Ä–æ–ª–µ–π (admin, owner, user)
- Owner role —É–∂–µ –±—ã–ª –≤ —Å–∏—Å—Ç–µ–º–µ (`profiles_owner_role.sql`)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ `getUserRole()` helper

### –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã: cafes, orders, menu_items, profiles
- –î–æ–±–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ –ø–æ–ª—è: owner_id, stop_reason
- –ù–µ –º–µ–Ω—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

## üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é

### 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

```bash
cd SubscribeCoffieBackend
supabase db push
# –∏–ª–∏
supabase migration up
```

### 2. –ù–∞–∑–Ω–∞—á–∏—Ç—å –≤–ª–∞–¥–µ–ª—å—Ü–∞ –∫–∞—Ñ–µ

```sql
-- –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –∫–∞—Ñ–µ
UPDATE cafes
SET owner_id = '<user_id_from_auth>'
WHERE id = '<cafe_id>';

-- –û–±–Ω–æ–≤–∏—Ç—å —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
UPDATE profiles
SET role = 'owner'
WHERE id = '<user_id_from_auth>';
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –í–æ–π—Ç–∏ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ä–æ–ª—å—é 'owner'
2. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ `/cafe-owner/dashboard`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–≤–æ–∏–º –∫–∞—Ñ–µ
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–æ–ø-–ª–∏—Å—Ç

## üîÑ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç P1 (Near-term)
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤ (Excel, PDF) - backend implementation
- [ ] Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–∞—Ö
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–æ-–∫–∞–º–ø–∞–Ω–∏—è–º–∏ –¥–ª—è —Å–≤–æ–µ–≥–æ –∫–∞—Ñ–µ
- [ ] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ETA –∏ max_active_orders —á–µ—Ä–µ–∑ UI

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç P2 (Long-term)
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ (Chart.js)
- [ ] A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–Ω—é
- [ ] Messaging —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏
- [ ] –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–æ–ª–∏–∫–æ–≤
- [ ] Inventory management (—É—á–µ—Ç –∑–∞–ø–∞—Å–æ–≤)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç P3 (Nice to have)
- [ ] Mobile app –¥–ª—è –≤–ª–∞–¥–µ–ª—å—Ü–µ–≤
- [ ] Real-time dashboard updates
- [ ] Predictive analytics (ML)
- [ ] Integration —Å accounting systems

## üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö cafe owners
- –ß–∞—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è dashboard
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–æ–ø-–ª–∏—Å—Ç–∞ (–∫–∞–∫ —á–∞—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è—é—Ç)
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –Ω–∞ –∑–∞–∫–∞–∑—ã
- Customer retention —É–ª—É—á—à–µ–Ω–∏–µ

## üêõ Known Issues

–ù–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –Ω–∞ –º–æ–º–µ–Ω—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–ø—Ä–æ—Å–∞—Ö –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö:
- –°–æ–∑–¥–∞—Ç—å issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏: `/docs/`
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞: support@subscribecoffie.com

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é
**–î–∞—Ç–∞:** 2026-01-30
**–í–µ—Ä—Å–∏—è:** 1.0.0
