# üîê –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –ü—Ä–æ–±–ª–µ–º–∞ —Å–æ –≤—Ö–æ–¥–æ–º –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ—Å–ª–µ `supabase db reset` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ
–ü–∞—Ä–æ–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω—ã.

---

## üîë –ê–ö–¢–£–ê–õ–¨–ù–´–ï CREDENTIALS

### üë®‚Äçüíº –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø):
```
Email:    admin@coffie.local
Password: admin123
```

### üè™ –í–ª–∞–¥–µ–ª–µ—Ü –∫–∞—Ñ–µ (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø):
```
Email:    owner@coffie.local
Password: owner123
```

---

## üöÄ –ö–∞–∫ –≤–æ–π—Ç–∏

### –®–∞–≥ 1: –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
```
http://localhost:3000/login
```

### –®–∞–≥ 2: –í–≤–µ—Å—Ç–∏ credentials
- Email: `admin@coffie.local`
- Password: `admin123`

### –®–∞–≥ 3: –ù–∞–∂–∞—Ç—å "–í–æ–π—Ç–∏"
–í–∞—Å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç –Ω–∞ `/admin` (–≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–¥–º–∏–Ω–∫–∏)

---

## üõ†Ô∏è –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–ï—Å–ª–∏ –ø–æ—Å–ª–µ `db reset` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–Ω–æ–≤–∞ –ø—Ä–æ–ø–∞–ª–∏, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
cd SubscribeCoffieBackend
./scripts/create_test_users.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- ‚úÖ –°–æ–∑–¥–∞—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç
- ‚úÖ –û–±–Ω–æ–≤–∏—Ç –ø–∞—Ä–æ–ª–∏ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç email
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ä–æ–ª–∏

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ß–µ—Ä–µ–∑ psql:
```bash
psql postgresql://postgres:postgres@127.0.0.1:54322/postgres -c "
SELECT 
  email,
  email_confirmed_at IS NOT NULL as confirmed,
  raw_user_meta_data->>'role' as role
FROM auth.users
ORDER BY email;
"
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
       email        | confirmed |    role    
--------------------+-----------+------------
 admin@coffie.local | t         | admin      
 owner@coffie.local | t         | cafe_owner 
```

---

## ‚ö†Ô∏è Troubleshooting

### –û—à–∏–±–∫–∞: "Invalid login credentials"

**–ü—Ä–∏—á–∏–Ω–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã –ø–æ—Å–ª–µ `db reset`

**–†–µ—à–µ–Ω–∏–µ**:
```bash
cd SubscribeCoffieBackend
./scripts/create_test_users.sh
```

### –û—à–∏–±–∫–∞: "User not confirmed"

**–ü—Ä–∏—á–∏–Ω–∞**: `email_confirmed_at` –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

**–†–µ—à–µ–Ω–∏–µ**:
```bash
psql postgresql://postgres:postgres@127.0.0.1:54322/postgres -c "
UPDATE auth.users 
SET email_confirmed_at = NOW() 
WHERE email = 'admin@coffie.local';
"
```

### –û—à–∏–±–∫–∞: "No access"

**–ü—Ä–∏—á–∏–Ω–∞**: –†–æ–ª—å –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–†–µ—à–µ–Ω–∏–µ**:
```bash
psql postgresql://postgres:postgres@127.0.0.1:54322/postgres -c "
UPDATE auth.users 
SET raw_user_meta_data = '{\"role\":\"admin\"}' 
WHERE email = 'admin@coffie.local';
"
```

---

## üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

### Admin (admin@coffie.local):
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∫–æ—Ñ–µ–µ–Ω
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—Ñ–µ–µ–Ω
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ—Ñ–µ–µ–Ω
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ—Ñ–µ–µ–Ω
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–Ω—é
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏
- ‚úÖ –û–¥–æ–±—Ä–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ –Ω–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

### Cafe Owner (owner@coffie.local):
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–∏—Ö –∫–æ—Ñ–µ–µ–Ω
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–∏—Ö –∫–æ—Ñ–µ–µ–Ω
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–∏–º –º–µ–Ω—é
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–∏—Ö –∑–∞–∫–∞–∑–æ–≤
- ‚ùå –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –¥—Ä—É–≥–∏–º –∫–∞—Ñ–µ–π–Ω—è–º
- ‚ùå –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

---

## üîÑ –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ db reset

**–í–ê–ñ–ù–û**: –ü–æ—Å–ª–µ `supabase db reset` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É–¥–∞–ª—è—é—Ç—Å—è!

**–ß—Ç–æ–±—ã –Ω–µ –≤–≤–æ–¥–∏—Ç—å –≤—Ä—É—á–Ω—É—é:**
1. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ `supabase/seed.sql`
2. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `create_test_users.sh`

### –í–∞—Ä–∏–∞–Ω—Ç 1: –î–æ–±–∞–≤–∏—Ç—å –≤ seed.sql (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–î–æ–±–∞–≤—å—Ç–µ –≤ –∫–æ–Ω–µ—Ü `supabase/seed.sql`:
```sql
-- Test users for admin panel
INSERT INTO auth.users (
  instance_id, id, aud, role, email, encrypted_password, 
  email_confirmed_at, raw_app_meta_data, raw_user_meta_data, 
  created_at, updated_at, confirmation_token, email_change, 
  email_change_token_new, recovery_token
)
SELECT
  '00000000-0000-0000-0000-000000000000',
  gen_random_uuid(),
  'authenticated',
  'authenticated',
  'admin@coffie.local',
  crypt('admin123', gen_salt('bf')),
  NOW(),
  '{"provider":"email","providers":["email"]}',
  '{"role":"admin"}',
  NOW(), NOW(), '', '', '', ''
WHERE NOT EXISTS (SELECT 1 FROM auth.users WHERE email = 'admin@coffie.local');
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç
```bash
./scripts/create_test_users.sh
```

---

## ‚úÖ –°—Ç–∞—Ç—É—Å

- [x] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞–Ω—ã
- [x] –ü–∞—Ä–æ–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- [x] Email –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω
- [x] –†–æ–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- [x] –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

---

**–¢–µ–ø–µ—Ä—å –≤—Ö–æ–¥ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å! üéâ**

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ:
1. –û—Ç–∫—Ä—ã—Ç—å: http://localhost:3000/login
2. –í–≤–µ—Å—Ç–∏: `admin@coffie.local` / `admin123`
3. –ù–∞–∂–∞—Ç—å "–í–æ–π—Ç–∏"

–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:
```bash
cd SubscribeCoffieBackend
./scripts/create_test_users.sh
```
