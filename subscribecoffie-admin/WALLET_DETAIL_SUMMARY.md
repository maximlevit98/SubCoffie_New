# ‚úÖ Wallet Detail Page ‚Äî –ì–æ—Ç–æ–≤–æ

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Admin RPC

**4 –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
```typescript
getWalletOverview(walletId)          // –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
getWalletTransactionsAdmin(...)      // –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å actor –∏ —Å–≤—è–∑—è–º–∏
getWalletPayments(...)               // –ü–ª–∞—Ç–µ–∂–∏ —Å –∫–æ–º–∏—Å—Å–∏—è–º–∏
getWalletOrders(...)                 // –ó–∞–∫–∞–∑—ã —Å itemized —Å–æ—Å—Ç–∞–≤–æ–º
```

**4 –Ω–æ–≤—ã—Ö —Ç–∏–ø–∞:**
- `AdminWalletOverview`
- `AdminWalletTransaction`
- `AdminWalletPayment`
- `AdminWalletOrder`

### 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å —Ç–∞–±–∞–º–∏

**4 –≤–∫–ª–∞–¥–∫–∏:**
1. **–û–±–∑–æ—Ä** ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ—à–µ–ª—å–∫–µ, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ, –±–∞–ª–∞–Ω—Å, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
2. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** ‚Äî —Å —Ç–∏–ø–∞–º–∏, –±–∞–ª–∞–Ω—Å–∞–º–∏ –¥–æ/–ø–æ—Å–ª–µ, —Å–≤—è–∑—è–º–∏ –Ω–∞ –∑–∞–∫–∞–∑—ã
3. **–ü–ª–∞—Ç–µ–∂–∏** ‚Äî —Å –∫–æ–º–∏—Å—Å–∏—è–º–∏, net amount, —Å—Ç–∞—Ç—É—Å–∞–º–∏
4. **–ó–∞–∫–∞–∑—ã** ‚Äî —Å –ø–æ–ª–Ω—ã–º itemized breakdown (—Ç–æ–≤–∞—Ä—ã, –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã, —Å—É–º–º—ã)

### 3. –í–∫–ª–∞–¥–∫–∞ "–û–±–∑–æ—Ä"

‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ—à–µ–ª—å–∫–µ (—Ç–∏–ø, –∫–∞—Ñ–µ/—Å–µ—Ç—å, ID, –¥–∞—Ç—ã)  
‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (–§–ò–û, –∫–æ–Ω—Ç–∞–∫—Ç—ã, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è)  
‚úÖ –ë–∞–ª–∞–Ω—Å (—Ç–µ–∫—É—â–∏–π + –≤—Å–µ–≥–æ –ø–æ–ø–æ–ª–Ω–µ–Ω–æ + —Å—Ä–µ–¥–Ω–∏–π —á–µ–∫)  
‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏/–∑–∞–∫–∞–∑—ã/–ø–ª–∞—Ç–µ–∂–∏/–≤–æ–∑–≤—Ä–∞—Ç—ã)  
‚úÖ –í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

### 4. –í–∫–ª–∞–¥–∫–∞ "–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏"

‚úÖ –¢–∞–±–ª–∏—Ü–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π  
‚úÖ –¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏ (badge)  
‚úÖ –ë–∞–ª–∞–Ω—Å –¥–æ/–ø–æ—Å–ª–µ  
‚úÖ –°—É–º–º–∞ —Å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º (+ –∑–µ–ª—ë–Ω—ã–π, ‚àí –∫—Ä–∞—Å–Ω—ã–π)  
‚úÖ –ò–Ω–∏—Ü–∏–∞—Ç–æ—Ä (actor) –µ—Å–ª–∏ –µ—Å—Ç—å  
‚úÖ –°–≤—è–∑—å –Ω–∞ –∑–∞–∫–∞–∑

### 5. –í–∫–ª–∞–¥–∫–∞ "–ü–ª–∞—Ç–µ–∂–∏"

‚úÖ –¢–∞–±–ª–∏—Ü–∞ –ø–ª–∞—Ç–µ–∂–µ–π  
‚úÖ –°—É–º–º–∞ / –ö–æ–º–∏—Å—Å–∏—è / Net Amount  
‚úÖ –°—Ç–∞—Ç—É—Å (pending/completed/failed/refunded)  
‚úÖ Provider transaction ID  
‚úÖ Idempotency key  
‚úÖ –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

### 6. –í–∫–ª–∞–¥–∫–∞ "–ó–∞–∫–∞–∑—ã"

‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–∫–∞–∑–æ–≤  
‚úÖ **Itemized breakdown:**
  - –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
  - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ
  - –¶–µ–Ω–∞ –∑–∞ –µ–¥–∏–Ω–∏—Ü—É
  - –ò—Ç–æ–≥–æ –ø–æ —Å—Ç—Ä–æ–∫–µ
  - –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã  
‚úÖ –°—Ç–∞—Ç—É—Å—ã (–∑–∞–∫–∞–∑ + –æ–ø–ª–∞—Ç–∞)  
‚úÖ –°—É–º–º—ã (subtotal + bonus + paid)  
‚úÖ –ö–ª–∏–µ–Ω—Ç (–∏–º—è, —Ç–µ–ª–µ—Ñ–æ–Ω, —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã)

### 7. UX

‚úÖ Empty states (—Å –∏–∫–æ–Ω–∫–∞–º–∏)  
‚úÖ Error states (–∫—Ä–∞—Å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏)  
‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è UI (–≥–æ—Ç–æ–≤ –∫ server-side)  
‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–æ—à–µ–ª—å–∫–∏ (–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä)  
‚úÖ –ß–∏—Ç–∞–±–µ–ª—å–Ω—ã–µ –¥–∞—Ç—ã/–¥–µ–Ω—å–≥–∏

---

## üìÅ –§–∞–π–ª—ã

### –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ (2)
```
lib/supabase/queries/wallets.ts      [+170 —Å—Ç—Ä–æ–∫]
app/admin/wallets/[userId]/page.tsx  [–ø–µ—Ä–µ–ø–∏—Å–∞–Ω]
```

### –ù–æ–≤—ã–µ (5)
```
app/admin/wallets/[userId]/WalletDetailClient.tsx   [150 —Å—Ç—Ä–æ–∫]
app/admin/wallets/[userId]/OverviewTab.tsx          [220 —Å—Ç—Ä–æ–∫]
app/admin/wallets/[userId]/TransactionsTab.tsx      [160 —Å—Ç—Ä–æ–∫]
app/admin/wallets/[userId]/PaymentsTab.tsx          [180 —Å—Ç—Ä–æ–∫]
app/admin/wallets/[userId]/OrdersTab.tsx            [280 —Å—Ç—Ä–æ–∫]
```

---

## ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

**Lint:**
```bash
npx eslint lib/supabase/queries/wallets.ts \
             app/admin/wallets/[userId]/*.tsx
```
‚úÖ **0 –æ—à–∏–±–æ–∫, 0 –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π** (–≤ scope)

**TypeScript:**
- ‚úÖ –í—Å–µ —Ç–∏–ø—ã —Å—Ç—Ä–æ–≥–æ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –ö–æ–¥ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –£–±—Ä–∞–Ω—ã –≤—Å–µ `any`

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–§–∞–π–ª–æ–≤ —Å–æ–∑–¥–∞–Ω–æ:** 5
- **–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 2  
- **Lines:** +1,825, -266
- **–ù–æ–≤—ã—Ö —Ç–∏–ø–æ–≤:** 4
- **–ù–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:** 4
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ React:** 7

---

## üöÄ Commit

```
12279c2 (HEAD -> main) feat(admin): implement wallet detail page with tabs
```

---

## üìå –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **Server-side –ø–∞–≥–∏–Ω–∞—Ü–∏—è** ‚Äî UI –≥–æ—Ç–æ–≤, –Ω–æ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑  
   –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: Low (50 –∑–∞–ø–∏—Å–µ–π –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ)

2. **Wallet selector** ‚Äî –µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ—à–µ–ª—å–∫–æ–≤, –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–π  
   –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: Medium

3. **–†—É—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** ‚Äî –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã (–Ω–µ—Ç RPC)  
   –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: High (—Ç—Ä–µ–±—É–µ—Ç—Å—è backend RPC)

---

## üß™ Smoke Test

### –¢–µ—Å—Ç 1: –û–±–∑–æ—Ä
–û—Ç–∫—Ä—ã—Ç—å `/admin/wallets` ‚Üí –∫–ª–∏–∫–Ω—É—Ç—å "–î–µ—Ç–∞–ª–∏" ‚Üí –≤–∫–ª–∞–¥–∫–∞ "–û–±–∑–æ—Ä"  
**–û–∂–∏–¥–∞–µ—Ç—Å—è:** –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –±–∞–ª–∞–Ω—Å–æ–º –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

### –¢–µ—Å—Ç 2: –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
Tab "–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏"  
**–û–∂–∏–¥–∞–µ—Ç—Å—è:** —Ç–∞–±–ª–∏—Ü–∞ —Å —Ç–∏–ø–∞–º–∏, –±–∞–ª–∞–Ω—Å–∞–º–∏, —Å–≤—è–∑—è–º–∏

### –¢–µ—Å—Ç 3: –ü–ª–∞—Ç–µ–∂–∏
Tab "–ü–ª–∞—Ç–µ–∂–∏"  
**–û–∂–∏–¥–∞–µ—Ç—Å—è:** —Ç–∞–±–ª–∏—Ü–∞ —Å –∫–æ–º–∏—Å—Å–∏—è–º–∏ –∏ net amount

### –¢–µ—Å—Ç 4: –ó–∞–∫–∞–∑—ã
Tab "–ó–∞–∫–∞–∑—ã"  
**–û–∂–∏–¥–∞–µ—Ç—Å—è:** –∫–∞—Ä—Ç–æ—á–∫–∏ —Å itemized breakdown

### –¢–µ—Å—Ç 5: Empty states
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–µ–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π  
**–û–∂–∏–¥–∞–µ—Ç—Å—è:** –∏–∫–æ–Ω–∫–∞ + —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–∞–∂–¥–æ–π –ø—É—Å—Ç–æ–π –≤–∫–ª–∞–¥–∫–µ

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ—à–µ–ª—å–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å:
- ‚úÖ 4 –≤–∫–ª–∞–¥–∫–∞–º–∏
- ‚úÖ –ü–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π admin RPC
- ‚úÖ Itemized breakdown –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ UX states
- ‚úÖ 0 –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞

---

**–î–∞—Ç–∞:** 2026-02-15  
**Agent:** Admin-Agent-2  
**Phase:** 3.2 (Wallet Detail)
