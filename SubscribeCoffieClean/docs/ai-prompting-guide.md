# Руководство по эффективной работе с AI в Cursor

## Принципы эффективного промптинга

### 1. Будь конкретным
```
❌ Плохо: "Сделай что-то с корзиной"
✅ Хорошо: "Добавь кнопку удаления товара в CartView, которая вызывает cart.remove(itemId:)"
```

### 2. Предоставляй контекст
```
❌ Плохо: "Исправь ошибку"
✅ Хорошо: "В CartStore.swift на строке 25 ошибка компиляции: 'Cannot assign to property: 'items' is immutable'. Нужно сделать items изменяемым."
```

### 3. Указывай файлы и структуру
```
✅ Хорошо: "В Views/CartView.swift добавь валидацию перед checkout, проверяя что cart.items не пуст"
```

### 4. Разбивай большие задачи
```
❌ Плохо: "Переделай всю архитектуру приложения"
✅ Хорошо: 
  1. "Создай новый Store для управления подписками"
  2. "Добавь экран SubscriptionView"
  3. "Интегрируй подписки в существующую навигацию"
```

## Типы запросов

### Рефакторинг
```
"Рефакторинг: вынеси логику валидации телефона из LoginView в отдельный helper класс PhoneValidator"
```

### Добавление функционала
```
"Добавь возможность применения промокода в CheckoutView. Промокод должен давать скидку 10% и храниться в WalletStore"
```

### Исправление багов
```
"Исправь: при возврате заказа (refund) деньги не возвращаются в кошелек. Проверь OrderStatusView и WalletStore"
```

### Оптимизация
```
"Оптимизируй CafeView: используй LazyVStack вместо VStack для списка категорий, так как их может быть много"
```

## Работа с контекстом

### Используй открытые файлы
- Открой файл, который нужно изменить
- AI видит открытые файлы и курсор
- Это помогает давать более точные ответы

### Упоминай связанные файлы
```
"В CartView используй существующий компонент TopBarView (как в CafeView) вместо кастомной навигации"
```

### Ссылайся на существующий код
```
"Создай ProductDetailView по аналогии с CafeView, используя тот же стиль и структуру MARK комментариев"
```

## Специфичные запросы для SwiftUI

### Создание компонентов
```
"Создай переиспользуемый компонент LoadingView в папке Components, который показывает ProgressView с текстом. Используй стиль как в ContentView (строка 105-107)"
```

### Работа со State
```
"В ProfileView добавь @State для isEditing и переключайся между режимами просмотра и редактирования профиля"
```

### Навигация
```
"Добавь переход из CafeView в ProductDetailView при нажатии на товар. Используй существующий enum AppScreen для навигации"
```

## Работа с ошибками

### Компиляционные ошибки
```
"Исправь ошибку компиляции: [показать ошибку из Xcode]"
```

### Логические ошибки
```
"В CartStore метод increment не обновляет UI. Проверь что @Published правильно настроен и View подписан на изменения"
```

### Runtime ошибки
```
"Приложение крашится при открытии CartView когда cart.items пуст. Добавь проверку на пустоту перед отображением списка"
```

## Продвинутые техники

### Цепочка запросов
```
1. "Создай модель Subscription с полями: id, name, price, duration"
2. "Создай SubscriptionStore для управления подписками"
3. "Добавь экран SubscriptionView для отображения доступных подписок"
4. "Интегрируй подписки в ProfileView"
```

### Сравнение и выбор
```
"Какой подход лучше для хранения настроек пользователя: @AppStorage или UserDefaults напрямую? Учти что в проекте уже используется @AppStorage"
```

### Обучение AI
```
"В проекте используется стиль: приватные View компоненты в том же файле с MARK комментариями. Применяй этот стиль ко всем новым View"
```

## Чего избегать

### ❌ Слишком общие запросы
```
"Сделай приложение лучше"
```

### ❌ Противоречивые инструкции
```
"Используй UIKit" (в SwiftUI проекте)
```

### ❌ Запросы без контекста
```
"Добавь кнопку" (где? какая? зачем?)
```

## Примеры отличных запросов

### Пример 1: Добавление функционала
```
"В CheckoutView добавь возможность выбора способа оплаты: кредиты или бонусы. 
Создай enum PaymentMethod с cases credits и bonuses. 
Добавь @State для selectedPaymentMethod и Picker для выбора. 
Используй стиль как в существующих компонентах проекта."
```

### Пример 2: Рефакторинг
```
"Рефакторинг CartStore: 
- Вынеси логику расчета скидки в отдельный метод calculateDiscount()
- Добавь MARK комментарии для организации кода
- Следуй стилю как в OrderStore.swift"
```

### Пример 3: Исправление бага
```
"Баг: при добавлении товара в корзину из ProductDetailView, количество не обновляется в CartView.
Проверь что CartStore правильно использует @Published и что CartView подписан через @ObservedObject.
Файлы: Views/ProductDetailView.swift, Views/CartView.swift, Models/CartStore.swift"
```

## Использование документации

### Ссылайся на созданные гайды
```
"При создании нового Store следуй паттернам из docs/swift-best-practices.md и используй структуру как в CartStore"
```

### Проси объяснения
```
"Объясни почему в SwiftUI нужно использовать @StateObject вместо @ObservedObject при создании Store в View"
```

## Итеративная разработка

### Начни с простого
```
1. "Создай базовую структуру ProductDetailView"
2. "Добавь отображение изображения товара"
3. "Добавь кнопку добавления в корзину"
4. "Добавь анимацию при добавлении"
```

### Уточняй по ходу
```
"Хорошо, но измени цвет кнопки на accentColor и добавь haptic feedback при нажатии"
```

## Работа с AI как с коллегой

### Обсуждай решения
```
"Какой подход лучше для кэширования меню кофейни: @AppStorage или отдельный CacheService?"
```

### Проси альтернативы
```
"Покажи 3 разных способа реализации pull-to-refresh в CafeView"
```

### Учись вместе
```
"Объясни разницу между @StateObject и @ObservedObject на примере нашего CartStore"
```
